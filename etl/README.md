# ETL Process

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–≤–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ –¥–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –ø—Ä–æ—Å—Ç–∞—è ETL-–ª–æ–≥–∏–∫–∞ —Å —Ä—É—á–Ω–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ test_png_files.py            # –ü—Ä–æ–≤–µ—Ä–∫–∞ PNG-—Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ check_images_in_directory.py # –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ __init__.py                      # –î–µ–ª–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é Python-–ø–∞–∫–µ—Ç–æ–º
‚îÇ
‚îú‚îÄ‚îÄ start_parsing_data_two_classes.py   # –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
‚îú‚îÄ‚îÄ update_parsing_data_two_classes.py  # –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø—É—Ç—è–º–∏ –∫ –ø–∞–ø–∫–∞–º –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```

## üîÅ –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å

### üß© –°–∫—Ä–∏–ø—Ç—ã

- `start_parsing_data_two_classes.py` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞. –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö ‚Äî –ø–∞–ø–∫–∞ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ PDF-–¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
- `update_parsing_data_two_classes.py` ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è**. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥, —á—Ç–æ –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥, –Ω–æ –ø—Ä–∏–º–µ–Ω–∏–º –∫ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º –≤—ã–±–æ—Ä–∫–∞–º.

–û–±–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –≤ —Ñ–∞–π–ª–µ `config.py`.

### üóÇÔ∏è –î–∞—Ç–∞—Å–µ—Ç –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ‚Äî `SpliterDataset`, –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ–¥–ø–∞–ø–∫–∏:

| ‚Ññ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                        | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ                                                                                               |
|--:|-------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| 1 | –ù–∞—á–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (1_files_from_1c_train)                         | PDF-—Ñ–∞–π–ª—ã, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤                                                               |
| 2 | –î–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (2_files_to_model_train)         | PNG-—Ñ–∞–π–ª—ã, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∞—Å—Å—ã `0` –∏ `1`                                                               |
| 3 | –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è / –æ—à–∏–±–∫–∏ –º–æ–¥–µ–ª–∏ (3_new_data)          | –°—é–¥–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ PDF-—Ñ–∞–π–ª—ã                                                                         |
| 4 | –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (`update_dd_mm_yyyy`) (4_files_from_1c_update) | –ê—Ä—Ö–∏–≤—ã –Ω–æ–≤—ã—Ö –≤—ã–±–æ—Ä–æ–∫ –∏–∑ –ø–∞–ø–∫–∏ `3` —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–∞–º, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –ø–æ—Ä–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ |
| 5 | –î–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (5_files_to_model_update)                 | PNG-—Ñ–∞–π–ª—ã, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–Ω—è `update_*` –ø–∞–ø–∫–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ –ø–æ –∫–ª–∞—Å—Å–∞–º `0` –∏ `1`              |

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Airflow

–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Airflow:

- –ö–æ–≥–¥–∞ –≤ –ø–∞–ø–∫–µ `3` –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è **N –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–¥–ø–∞–ø–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ `update_dd_mm_yyyy` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `4` –∏ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ `3` –≤ `4`.
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ `update_parsing_data_two_classes.py`, –∞ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –ø–∞–ø–∫–∏ `4` —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∞—Ç–æ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–æ–¥–ø–∞–ø–∫—É –≤–Ω—É—Ç—Ä–∏ `5`, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∞—Å—Å—ã `0` –∏ `1`.

## üõ†Ô∏è –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

–§–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `utils/` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é:

- `test_png_files.py` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç PNG-—Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ, –æ—à–∏–±–∫–∏ —á—Ç–µ–Ω–∏—è –∏ —Ç.–ø.
- `check_images_in_directory.py` ‚Äî —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

